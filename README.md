# Test code for verifying an ESP8266 binary for use with OTA

Using parts of the AxTLS library, I'm trying to get the ESP8266 to validate an binary sent via OTA.

It needs to decrypt the sent signature, and compare it to the computed hash.

So far, I've successfully had the SHA1 and SHA256 digest verified.

The private key was generated by:
```bash
openssl genrsa -out key/private.key.pem 1024 
```

The public key was fetched by:
```bash
openssl rsa -in key/private.key.pem -pubout > key/public.key.pem
```

To get the modulus and exponent:
```bash
openssl rsa -pubin -inform PEM -text -noout < key/public.key.pem
```

The SHA1 digest was generated by:

```bash
openssl dgst -sha1 -binary -out data/hash1 data/data.txt
```

The SHA 1 Signature was generated by:
```bash
openssl pkeyutl -sign -in hash1 -inkey key/private.key.pem -pkeyopt digest:sha1 -out data/sig1
```

The SHA256 digest was generated by:

```bash
openssl dgst -sha256 -binary -out data/hash256 data/data.txt
```

The SHA 256 Signature was generated by:
```bash
openssl pkeyutl -sign -in hash256 -inkey key/private.key.pem -pkeyopt digest:sha256 -out data/sig256
```


